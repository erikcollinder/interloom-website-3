@import "tailwindcss";

@source "../../src/**/*.njk";
@source "../../src/**/*.md";

@theme {
  /* =================================================================
     Base swatches — raw palette, not intended to change per theme.
     These remain available as bg-gray-500, text-gray-200, etc.
     ================================================================= */

  --color-gray-50: #fafafa;
  --color-gray-100: #f5f5f5;
  --color-gray-200: #e5e5e5;
  --color-gray-300: #d4d4d4;
  --color-gray-400: #a3a3a3;
  --color-gray-500: #737373;
  --color-gray-600: #525252;
  --color-gray-700: #404040;
  --color-gray-800: #262626;
  --color-gray-900: #171717;
  --color-gray-950: #0a0a0a;

  --color-accent-50: #fafafa;
  --color-accent-100: #f5f5f5;
  --color-accent-200: #e5e5e5;
  --color-accent-300: #d4d4d4;
  --color-accent-400: #a3a3a3;
  --color-accent-500: #262626;
  --color-accent-600: #171717;
  --color-accent-700: #0a0a0a;
  --color-accent-800: #0a0a0a;
  --color-accent-900: #0a0a0a;

  /* Status colors */
  --color-success: #22c55e;
  --color-warning: #f59e0b;
  --color-error: #ef4444;

  /* =================================================================
     Semantic tokens — four levels each, strongest (1) to faintest (4).
     ================================================================= */

  --color-surface-1: var(--surface-1);
  --color-surface-2: var(--surface-2);
  --color-surface-3: var(--surface-3);
  --color-surface-4: var(--surface-4);

  --color-fg-1: var(--fg-1);
  --color-fg-2: var(--fg-2);
  --color-fg-3: var(--fg-3);
  --color-fg-4: var(--fg-4);

  --color-line: var(--line);
  --color-line-faint: var(--line-faint);

  /* Tint tokens */
  --color-tint-blue: var(--tint-blue);
  --color-tint-blue-subtle: var(--tint-blue-subtle);
  --color-tint-blue-vivid: var(--tint-blue-vivid);
  --color-tint-purple: var(--tint-purple);
  --color-tint-purple-subtle: var(--tint-purple-subtle);
  --color-tint-pink: var(--tint-pink);
  --color-tint-pink-subtle: var(--tint-pink-subtle);
  --color-tint-amber: var(--tint-amber);
  --color-tint-amber-subtle: var(--tint-amber-subtle);
  --color-tint-emerald: var(--tint-emerald);
  --color-tint-emerald-subtle: var(--tint-emerald-subtle);
  --color-tint-cyan: var(--tint-cyan);
  --color-tint-cyan-subtle: var(--tint-cyan-subtle);
  --color-tint-rose: var(--tint-rose);
  --color-tint-rose-subtle: var(--tint-rose-subtle);
  --color-tint-indigo: var(--tint-indigo);
  --color-tint-indigo-subtle: var(--tint-indigo-subtle);
  --color-tint-teal: var(--tint-teal);
  --color-tint-teal-subtle: var(--tint-teal-subtle);
  --color-tint-orange: var(--tint-orange);
  --color-tint-orange-subtle: var(--tint-orange-subtle);
  --color-tint-violet: var(--tint-violet);
  --color-tint-violet-subtle: var(--tint-violet-subtle);
  --color-tint-red: var(--tint-red);
  --color-tint-red-subtle: var(--tint-red-subtle);
  --color-tint-green: var(--tint-green);
  --color-tint-green-subtle: var(--tint-green-subtle);
  --color-tint-yellow: var(--tint-yellow);
  --color-tint-yellow-subtle: var(--tint-yellow-subtle);

  /* Typography */
  --font-sans: "Geist", "Inter", system-ui, -apple-system, sans-serif;
  --font-serif: "Hedvig Letters Serif", Georgia, serif;
  --font-mono: "Geist Mono", "SF Mono", "Consolas", monospace;

  /* Font sizes */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;

  /* Spacing scale */
  --spacing-0: 0;
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  --spacing-3: 0.75rem;
  --spacing-4: 1rem;
  --spacing-5: 1.25rem;
  --spacing-6: 1.5rem;
  --spacing-8: 2rem;
  --spacing-10: 2.5rem;
  --spacing-12: 3rem;
  --spacing-16: 4rem;

  /* Border radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
}

/* =================================================================
   Light mode — default
   ================================================================= */
:root {
  color-scheme: light;

  --surface-1: #ffffff;
  --surface-2: var(--color-gray-50);
  --surface-3: var(--color-gray-100);
  --surface-4: var(--color-gray-200);

  --fg-1: var(--color-gray-900);
  --fg-2: var(--color-gray-700);
  --fg-3: var(--color-gray-500);
  --fg-4: var(--color-gray-400);

  --line: rgba(0, 0, 0, 0.10);
  --line-faint: rgba(0, 0, 0, 0.04);

  --tint-blue: #1d4ed8;        --tint-blue-subtle: #dbeafe;  --tint-blue-vivid: #3b82f6;
  --tint-purple: #7e22ce;      --tint-purple-subtle: #f3e8ff;
  --tint-pink: #be185d;        --tint-pink-subtle: #fce7f3;
  --tint-amber: #b45309;       --tint-amber-subtle: #fef3c7;
  --tint-emerald: #047857;     --tint-emerald-subtle: #d1fae5;
  --tint-cyan: #0e7490;        --tint-cyan-subtle: #cffafe;
  --tint-rose: #be123c;        --tint-rose-subtle: #ffe4e6;
  --tint-indigo: #4338ca;      --tint-indigo-subtle: #e0e7ff;
  --tint-teal: #0f766e;        --tint-teal-subtle: #ccfbf1;
  --tint-orange: #c2410c;      --tint-orange-subtle: #ffedd5;
  --tint-violet: #6d28d9;      --tint-violet-subtle: #ede9fe;
  --tint-red: #b91c1c;         --tint-red-subtle: #fee2e2;
  --tint-green: #15803d;       --tint-green-subtle: #dcfce7;
  --tint-yellow: #a16207;      --tint-yellow-subtle: #fef9c3;
}

/* =================================================================
   Dark mode (tokens defined, not active yet — no toggle)
   ================================================================= */
:root.dark {
  color-scheme: dark;

  --surface-1: var(--color-gray-800);
  --surface-2: var(--color-gray-900);
  --surface-3: var(--color-gray-950);
  --surface-4: #000000;

  --fg-1: var(--color-gray-50);
  --fg-2: var(--color-gray-300);
  --fg-3: var(--color-gray-500);
  --fg-4: var(--color-gray-600);

  --line: rgba(255, 255, 255, 0.10);
  --line-faint: rgba(255, 255, 255, 0.04);

  --tint-blue: #60a5fa;        --tint-blue-subtle: rgba(59, 130, 246, 0.12);  --tint-blue-vivid: #60a5fa;
  --tint-purple: #c084fc;      --tint-purple-subtle: rgba(168, 85, 247, 0.12);
  --tint-pink: #f472b6;        --tint-pink-subtle: rgba(236, 72, 153, 0.12);
  --tint-amber: #fbbf24;       --tint-amber-subtle: rgba(245, 158, 11, 0.12);
  --tint-emerald: #34d399;     --tint-emerald-subtle: rgba(16, 185, 129, 0.12);
  --tint-cyan: #22d3ee;        --tint-cyan-subtle: rgba(6, 182, 212, 0.12);
  --tint-rose: #fb7185;        --tint-rose-subtle: rgba(244, 63, 94, 0.12);
  --tint-indigo: #818cf8;      --tint-indigo-subtle: rgba(99, 102, 241, 0.12);
  --tint-teal: #2dd4bf;        --tint-teal-subtle: rgba(20, 184, 166, 0.12);
  --tint-orange: #fb923c;      --tint-orange-subtle: rgba(249, 115, 22, 0.12);
  --tint-violet: #a78bfa;      --tint-violet-subtle: rgba(139, 92, 246, 0.12);
  --tint-red: #f87171;         --tint-red-subtle: rgba(239, 68, 68, 0.12);
  --tint-green: #4ade80;       --tint-green-subtle: rgba(34, 197, 94, 0.12);
  --tint-yellow: #facc15;      --tint-yellow-subtle: rgba(234, 179, 8, 0.12);
}


/* =================================================================
   @layer base — reset, body, typography, prose
   ================================================================= */
@layer base {
  *,
  *::before,
  *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: var(--font-sans);
    font-size: 15px;
    line-height: 1.6;
    color: var(--color-fg-1);
    background-color: var(--color-surface-2);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1 {
    font-family: var(--font-serif);
    font-size: 2rem;
    font-weight: 400;
    margin-bottom: 1rem;
    line-height: 1.2;
    letter-spacing: 0;
  }

  h2 {
    font-size: 1.5rem;
    font-weight: 500;
    margin: 2rem 0 1rem;
    letter-spacing: -0.02em;
  }

  h3 {
    font-size: 1.25rem;
    font-weight: 500;
    margin: 1.5rem 0 0.75rem;
    letter-spacing: -0.01em;
  }

  p {
    margin-bottom: 1rem;
  }

  a {
    color: var(--color-tint-blue);
  }

  ul, ol {
    margin: 1rem 0;
    padding-left: 1.5rem;
  }

  li {
    margin-bottom: 0.5rem;
  }

  /* Prose — tables, code blocks in docs/blog rendered markdown */
  .docs-body table,
  .post-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
    font-size: 0.875rem;
  }

  .docs-body th,
  .docs-body td,
  .post-content th,
  .post-content td {
    text-align: left;
    padding: 0.75rem;
    border-bottom: 1px solid var(--color-line);
  }

  .docs-body th,
  .post-content th {
    font-weight: 600;
    background-color: var(--color-surface-3);
  }

  .docs-body code,
  .post-content code {
    font-family: var(--font-mono);
    font-size: 0.875em;
    background-color: var(--color-line-faint);
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
  }

  .docs-body pre,
  .post-content pre {
    background-color: var(--color-gray-800);
    color: var(--color-gray-200);
    padding: 1rem;
    border-radius: 6px;
    overflow-x: auto;
    margin: 1rem 0;
  }

  .docs-body pre code,
  .post-content pre code {
    background: none;
    padding: 0;
    font-size: 0.8125rem;
    color: inherit;
  }

  :focus-visible {
    outline: 2px solid var(--color-accent-500);
    outline-offset: 2px;
  }
}


/* =================================================================
   @layer components — semantic classes used by content files
   ================================================================= */
@layer components {

  /* ---- Layout: gutters & grids ---- */

  .header-grid {
    --gutter-width: 2.5rem;
    --pattern-fg: rgba(0, 0, 0, 0.05);
    display: grid;
    grid-template-columns: var(--gutter-width) 1fr var(--gutter-width);
    align-items: stretch;
  }

  .page-grid {
    --gutter-width: 2.5rem;
    --pattern-fg: rgba(0, 0, 0, 0.05);
    display: grid;
    grid-template-columns: var(--gutter-width) 1fr var(--gutter-width);
    min-height: calc(100vh - 150px);
  }

  .gutter {
    border-left: 1px solid var(--color-line-faint);
    border-right: 1px solid var(--color-line-faint);
    background-image: repeating-linear-gradient(
      315deg,
      rgba(0, 0, 0, 0.05) 0,
      rgba(0, 0, 0, 0.05) 1px,
      transparent 0,
      transparent 50%
    );
    background-size: 10px 10px;
    background-attachment: fixed;
  }

  @media (max-width: 1100px) {
    .page-grid,
    .header-grid {
      grid-template-columns: 1fr;
    }
    .gutter {
      display: none;
    }
  }

  /* ---- Main content wrapper ---- */

  /* Prose content directly in main (not inside sections) gets
     a comfortable reading width with horizontal padding. */
  main > :not(section) {
    max-width: 680px;
    margin-inline: auto;
    padding-inline: 1rem;
  }

  /* Images can be a bit wider than text */
  main > img {
    max-width: 800px;
    display: block;
    border-radius: 8px;
  }

  /* Vertical rhythm for prose area between sections */
  main > :not(section):first-child {
    padding-top: 3rem;
  }

  main > section + :not(section) {
    padding-top: 3rem;
  }

  main > :not(section) + section {
    margin-top: 3rem;
  }

  /* Blockquotes */
  main > blockquote {
    border-left: 3px solid var(--color-line);
    padding-left: 1.5rem;
    color: var(--color-fg-2);
    font-style: italic;
  }

  main > blockquote p {
    margin-bottom: 0;
  }

  /* Horizontal rules as subtle dividers */
  main > hr {
    border: none;
    border-top: 1px solid var(--color-line);
    margin: 2.5rem auto;
  }

  /* Sections handle their own internal padding/clamping */
  main section {
    padding: 0 1rem;
  }

  main section > * {
    max-width: 680px;
    margin-inline: auto;
  }

  /* Section keylines */
  section {
    position: relative;
  }

  section::before {
    content: '';
    position: absolute;
    left: -100vw;
    width: 200vw;
    top: 0;
    height: 1px;
    background: var(--color-line-faint);
  }

  /* Disable keylines on sections with their own visual separation */
  .hero::before,
  .cta::before {
    display: none;
  }

  /* ---- Hero ---- */

  .hero {
    position: relative;
    padding: 6rem 0 28rem;
    background: var(--color-surface-1) url('../images/landscape-background-2.png') no-repeat bottom center;
    background-size: 100% auto;
  }

  .hero::after {
    content: '';
    position: absolute;
    inset: 0;
    box-shadow: inset 0 0 0 8px white;
    pointer-events: none;
  }

  .hero h1 {
    font-size: 2.5rem;
    letter-spacing: 0;
  }

  .subtitle {
    font-size: 1.125rem;
    color: var(--color-fg-3);
    margin-bottom: 2rem;
  }

  /* ---- Button ---- */

  .btn {
    display: inline-block;
    background: var(--color-fg-1);
    color: var(--color-surface-1);
    padding: 0.625rem 1.25rem;
    text-decoration: none;
    font-weight: 500;
    border-radius: 4px;
    font-size: 1rem;
    line-height: 1.4;
    transition: opacity 0.15s;
  }

  .btn:hover {
    opacity: 0.85;
  }

  /* ---- CTA ---- */

  .cta {
    padding: 0.5rem;
    background: var(--color-surface-1);
  }

  .cta-inner {
    position: relative;
    max-width: none;
    margin: 0;
    padding: 16rem 1rem;
    background: url('../images/landscape-background-1.png') no-repeat center;
    background-size: cover;
    text-align: center;
    border-radius: 8px;
    overflow: hidden;
  }

  .cta-inner::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 8px;
    box-shadow: inset 0 0 0 1px var(--color-line);
    pointer-events: none;
  }

  .cta h2 {
    margin-top: 0;
  }

  .cta p {
    margin-bottom: 1.5rem;
  }

  .cta .btn {
    margin-top: 0.5rem;
  }

  /* ---- Blog/Release post list ---- */

  .post-list {
    list-style: none;
    padding: 0;
  }

  .post-list li {
    padding: 1rem 0;
    border-bottom: 1px solid var(--color-line);
  }

  .post-list time {
    display: block;
    font-size: 0.875rem;
    color: var(--color-fg-3);
  }

  .post-list a {
    text-decoration: none;
    font-weight: 500;
  }

  /* ---- Post page ---- */

  .post {
    padding: 3rem 1rem;
  }

  .post > * {
    max-width: 680px;
    margin-inline: auto;
  }

  .post-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--color-line);
  }

  .post-header time {
    color: var(--color-fg-3);
    font-size: 0.875rem;
  }

  .post-content {
    margin-bottom: 3rem;
  }

  .post-content > * {
    max-width: 680px;
    margin-inline: auto;
  }

  /* ---- Docs layout ---- */

  .docs-layout {
    display: grid;
    grid-template-columns: 240px 1fr;
    min-height: calc(100vh - 200px);
  }

  .docs-sidebar {
    border-right: 1px solid var(--color-line);
    padding: 2rem 1rem;
    position: sticky;
    top: 50px;
    height: calc(100vh - 50px);
    overflow-y: auto;
  }

  .docs-nav-section {
    margin-bottom: 1.5rem;
  }

  .docs-nav-section-title {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-fg-3);
    margin-bottom: 0.5rem;
    padding: 0 0.5rem;
  }

  .docs-nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .docs-nav-list li {
    margin: 0;
  }

  .docs-nav-list a {
    display: block;
    padding: 0.375rem 0.5rem;
    color: var(--color-fg-3);
    text-decoration: none;
    font-size: 0.875rem;
    border-radius: 4px;
    transition: background-color 0.15s, color 0.15s;
  }

  .docs-nav-list a:hover {
    color: var(--color-fg-1);
    background-color: var(--color-line-faint);
  }

  .docs-nav-list a.active {
    color: var(--color-fg-1);
    background-color: var(--color-surface-3);
    font-weight: 500;
  }

  .docs-content {
    padding: 2rem 3rem;
    max-width: 800px;
  }

  .docs-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--color-line);
  }

  .docs-header h1 {
    margin-bottom: 0;
  }

  .docs-body h2 {
    margin-top: 2.5rem;
  }

  .docs-body h3 {
    margin-top: 2rem;
  }

  @media (max-width: 768px) {
    .docs-layout {
      grid-template-columns: 1fr;
    }

    .docs-sidebar {
      position: static;
      height: auto;
      border-right: none;
      border-bottom: 1px solid var(--color-line);
      padding: 1rem;
    }

    .docs-content {
      padding: 1.5rem 1rem;
    }
  }

  /* ---- Footer ---- */

  .footer-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .footer-col {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .footer-col h4 {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-fg-1);
    margin-bottom: 0.5rem;
  }

  .footer-col a {
    color: var(--color-fg-3);
    text-decoration: none;
  }

  .footer-col a:hover {
    color: var(--color-fg-1);
  }

  .footer-copyright {
    padding-top: 1.5rem;
    border-top: 1px solid var(--color-line-faint);
  }
}
